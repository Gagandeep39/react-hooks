(this["webpackJsonpreact-hooks"]=this["webpackJsonpreact-hooks"]||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),c=n.n(o),l=(n(13),n(1)),i=n(2),u=n(7),s=(n(14),function(e){return r.a.createElement("div",{className:"card"},e.children)}),m=(n(15),n(16),function(){return r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),d=r.a.memo((function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(""),u=Object(l.a)(i,2),d=u[0],E=u[1];return r.a.createElement("section",{className:"ingredient-form"},r.a.createElement(s,null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onAddIngredient({title:o,amount:d})}},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"title"},"Name"),r.a.createElement("input",{type:"text",id:"title",value:o.title,onChange:function(e){c(e.target.value)}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"amount"},"Amount"),r.a.createElement("input",{type:"number",id:"amount",value:d.amount,onChange:function(e){E(e.target.value)}})),r.a.createElement("div",{className:"ingredient-form__actions"},r.a.createElement("button",{type:"submit"},"Add Ingredient"),e.loading?r.a.createElement(m,null):null))))})),E=(n(17),r.a.memo((function(e){var t=Object(a.useRef)(),n=Object(a.useState)(""),o=Object(l.a)(n,2),c=o[0],i=o[1],u=e.onLoadIngredients;return Object(a.useEffect)((function(){var e=setTimeout((function(){if(c===t.current.value){console.log("Executed");var e=0===c.length?"":'?orderBy="title"&equalTo="'.concat(c,'"');fetch("https://emerald-mission-191715.firebaseio.com/ingredients.json"+e).then((function(e){return e.json()})).then((function(e){var t=[];for(var n in e)t.push({id:n,title:e[n].title,amount:e[n].amount});u(t)}))}}),500);return function(){clearTimeout(e)}}),[c,u,t]),r.a.createElement("section",{className:"search"},r.a.createElement(s,null,r.a.createElement("div",{className:"search-input"},r.a.createElement("label",null,"Filter by Title"),r.a.createElement("input",{ref:t,type:"text",value:c,onChange:function(e){return i(e.target.value)}}))))}))),f=(n(18),function(e){return r.a.createElement("section",{className:"ingredient-list"},r.a.createElement("h2",null,"Loaded Ingredients"),r.a.createElement("ul",null,e.ingredients.map((function(t){return r.a.createElement("li",{key:t.id,onClick:e.onRemoveItem.bind(void 0,t.id)},r.a.createElement("span",null,t.title),r.a.createElement("span",null,t.amount,"x"))}))))}),h=(n(19),r.a.memo((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"backdrop",onClick:e.onClose}),r.a.createElement("div",{className:"error-modal"},r.a.createElement("h2",null,"An Error Occurred!"),r.a.createElement("p",null,e.children),r.a.createElement("div",{className:"error-modal__actions"},r.a.createElement("button",{type:"button",onClick:e.onClose},"Okay"))))}))),g=function(e,t){switch(t.type){case"SET":return t.ingredients;case"ADD":return[].concat(Object(u.a)(e),[t.ingredient]);case"DELETE":return e.filter((function(e){return e.id!==t.id}));default:throw new Error("Unreachable")}},b=function(e,t){switch(t.type){case"SEND":return{loading:!0,error:null};case"RESPONSE":return Object(i.a)(Object(i.a)({},e),{},{loading:!1});case"ERROR":return{loading:!1,error:t.errorData};case"CLEAR":return Object(i.a)(Object(i.a)({},e),{},{error:null});default:throw new Error("Shouldnt be reached")}};var v=function(){var e=Object(a.useReducer)(g,[]),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useReducer)(b,{loading:!1,error:null}),u=Object(l.a)(c,2),s=u[0],m=u[1],v=Object(a.useCallback)((function(e){o({type:"SET",ingredients:e})}),[]);return r.a.createElement("div",{className:"App"},s.error?r.a.createElement(h,{onClose:function(){m({type:"CLEAR"})}}," ",s.error," "):null,r.a.createElement(d,{onAddIngredient:function(e){m({type:"SEND"}),fetch("https://emerald-mission-191715.firebaseio.com/ingredients.json",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return m({type:"RESPONSE"}),e.json()})).then((function(t){o({type:"ADD",ingredient:Object(i.a)({id:t.name},e)})})).catch((function(e){return m({type:"ERROR",error:e.message})}))},loading:s.isLoading}),r.a.createElement("section",null,r.a.createElement(E,{onLoadIngredients:v}),r.a.createElement(f,{ingredients:n,onRemoveItem:function(e){m({type:"SEND"}),fetch("https://emerald-mission-191715.firebaseio.com/ingredients/".concat(e,".json"),{method:"DELETE"}).then((function(t){m({type:"RESPONSE"}),console.log("Executed"),console.log(n),o({type:"DELETE",id:e}),console.log(n)})).catch((function(e){return m({type:"ERROR",error:e.message})}))}})))},p=(n(20),r.a.createContext({isAuth:!1,login:function(){}})),O=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),o=n[0],c=n[1];return r.a.createElement(p.Provider,{value:{login:function(){c(!0)},isAuth:o}},e.children)},j=function(e){var t=Object(a.useContext)(p);return r.a.createElement("div",{className:"auth"},r.a.createElement(s,null,r.a.createElement("h2",null,"You are not authenticated!"),r.a.createElement("p",null,"Please log in to continue."),r.a.createElement("button",{onClick:function(){t.login()}},"Log In")))},y=function(e){var t=Object(a.useContext)(p),n=r.a.createElement(j,null);return t.isAuth&&(n=r.a.createElement(v,null)),n};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null,r.a.createElement(y,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.8b7689c5.chunk.js.map